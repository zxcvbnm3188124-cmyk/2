1   | <!DOCTYPE html>
2   | <html lang="zh-CN">
3   | <head>
4   |     <meta charset="UTF-8">
5   |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
6   |     <title>å¹¸è¿å¤§è½¬ç›˜</title>
7   |     <style>
8   |         :root {
9   |             --wheel-size: 320px;
10  |             --color-1: #FF5252; /* 3å…ƒ - çº¢ */
11  |             --color-2: #7C4DFF; /* æœªä¸­å¥– - ç´« */
12  |             --color-3: #448AFF; /* 0.3å…ƒ - è“ */
13  |             --color-4: #FFC107; /* å†æ¥ä¸€æ¬¡ - é»„ */
14  |             --color-5: #00BCD4; /* 0.1å…ƒ - é’ */
15  |             --color-6: #8BC34A; /* å†æ¥ä¸€æ¬¡ - ç»¿ */
16  |         }
17  | 
18  |         body {
19  |             font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
20  |             background: #f0f2f5;
21  |             display: flex;
22  |             flex-direction: column;
23  |             align-items: center;
24  |             justify-content: center;
25  |             min-height: 100vh;
26  |             margin: 0;
27  |             overflow: hidden;
28  |         }
29  | 
30  |         h1 { color: #333; margin-bottom: 10px; }
31  | 
32  |         /* ä»ªè¡¨ç›˜ */
33  |         .dashboard {
34  |             background: white;
35  |             padding: 15px 30px;
36  |             border-radius: 50px;
37  |             box-shadow: 0 4px 15px rgba(0,0,0,0.1);
38  |             display: flex;
39  |             gap: 20px;
40  |             margin-bottom: 30px;
41  |             font-size: 1.1rem;
42  |             font-weight: bold;
43  |         }
44  |         .highlight { color: #FF5252; font-size: 1.3rem; }
45  | 
46  |         /* è½¬ç›˜å®¹å™¨ */
47  |         .wheel-container {
48  |             position: relative;
49  |             width: var(--wheel-size);
50  |             height: var(--wheel-size);
51  |             border: 10px solid white;
52  |             border-radius: 50%;
53  |             box-shadow: 0 0 20px rgba(0,0,0,0.2);
54  |         }
55  | 
56  |         /* è½¬ç›˜ä¸»ä½“ */
57  |         .wheel {
58  |             width: 100%;
59  |             height: 100%;
60  |             border-radius: 50%;
61  |             position: relative;
62  |             /* 6ä¸ªæ‰‡åŒºï¼Œæ¯ä¸ª60åº¦ */
63  |             background: conic-gradient(
64  |                 var(--color-1) 0deg 60deg,
65  |                 var(--color-2) 60deg 120deg,
66  |                 var(--color-3) 120deg 180deg,
67  |                 var(--color-4) 180deg 240deg,
68  |                 var(--color-5) 240deg 300deg,
69  |                 var(--color-6) 300deg 360deg
70  |             );
71  |             transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
72  |             transform: rotate(0deg);
73  |         }
74  | 
75  |         /* æ‰‡åŒºæ–‡å­— */
76  |         .label {
77  |             position: absolute;
78  |             top: 50%;
79  |             left: 50%;
80  |             transform-origin: 0 0;
81  |             color: white;
82  |             font-weight: bold;
83  |             font-size: 14px;
84  |             text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
85  |             width: 50%; /* ä»ä¸­å¿ƒåˆ°è¾¹ç¼˜ */
86  |             height: 1px;
87  |             text-align: center;
88  |             line-height: 0;
89  |         }
90  |         
91  |         /* æ–‡å­—ä½ç½®ä¿®æ­£ï¼šæ—‹è½¬åˆ°æ‰‡åŒºä¸­å¿ƒï¼Œå¹¶å¤–æ¨ */
92  |         .label span {
93  |             display: inline-block;
94  |             transform: rotate(90deg) translateY(-20px); /* æ–‡å­—æœ¬èº«çš„æ–¹å‘è°ƒæ•´ */
95  |             position: absolute;
96  |             right: 40px; /* è·ç¦»åœ†å¿ƒçš„è·ç¦»æ§åˆ¶ */
97  |         }
98  | 
99  |         .l1 { transform: rotate(30deg); }
100 |         .l2 { transform: rotate(90deg); }
101 |         .l3 { transform: rotate(150deg); }
102 |         .l4 { transform: rotate(210deg); }
103 |         .l5 { transform: rotate(270deg); }
104 |         .l6 { transform: rotate(330deg); }
105 | 
106 |         /* ä¸­å¿ƒæŒ‡é’ˆ/æŒ‰é’®åŒºåŸŸ */
107 |         .center-circle {
108 |             position: absolute;
109 |             top: 50%;
110 |             left: 50%;
111 |             transform: translate(-50%, -50%);
112 |             width: 80px;
113 |             height: 80px;
114 |             background: linear-gradient(135deg, #FF9E80, #FF6E40);
115 |             border: 4px solid white;
116 |             border-radius: 50%;
117 |             display: flex;
118 |             align-items: center;
119 |             justify-content: center;
120 |             color: white;
121 |             font-size: 20px;
122 |             font-weight: bold;
123 |             cursor: pointer;
124 |             box-shadow: 0 0 10px rgba(0,0,0,0.3);
125 |             z-index: 10;
126 |             user-select: none;
127 |         }
128 |         
129 |         /* é¡¶éƒ¨æŒ‡é’ˆ */
130 |         .pointer {
131 |             position: absolute;
132 |             top: -20px;
133 |             left: 50%;
134 |             transform: translateX(-50%);
135 |             width: 0;
136 |             height: 0;
137 |             border-left: 15px solid transparent;
138 |             border-right: 15px solid transparent;
139 |             border-top: 25px solid #333;
140 |             z-index: 20;
141 |         }
142 | 
143 |         .btn-disabled {
144 |             background: #ccc;
145 |             cursor: not-allowed;
146 |         }
147 | 
148 |         /* å¼¹çª— */
149 |         .modal-overlay {
150 |             position: fixed;
151 |             top: 0; left: 0; width: 100%; height: 100%;
152 |             background: rgba(0,0,0,0.6);
153 |             display: none;
154 |             justify-content: center;
155 |             align-items: center;
156 |             z-index: 100;
157 |         }
158 |         .modal {
159 |             background: white;
160 |             padding: 30px;
161 |             border-radius: 15px;
162 |             text-align: center;
163 |             animation: popIn 0.3s ease;
164 |             width: 80%;
165 |             max-width: 300px;
166 |         }
167 |         .modal h2 { margin-top: 0; color: #FF5252; }
168 |         .modal p { font-size: 1.2rem; margin: 20px 0; }
169 |         .close-btn {
170 |             background: #333;
171 |             color: white;
172 |             border: none;
173 |             padding: 10px 20px;
174 |             border-radius: 5px;
175 |             cursor: pointer;
176 |         }
177 | 
178 |         @keyframes popIn {
179 |             from { transform: scale(0.8); opacity: 0; }
180 |             to { transform: scale(1); opacity: 1; }
181 |         }
182 |     </style>
183 | </head>
184 | <body>
185 | 
186 |     <h1>è¶…çº§ç¦åˆ©è½¬ç›˜</h1>
187 | 
188 |     <div class="dashboard">
189 |         <div>å‰©ä½™æ¬¡æ•°: <span id="count" class="highlight">5</span></div>
190 |         <div>æ€»é‡‘é¢: <span id="money" class="highlight">0</span> å…ƒ</div>
191 |     </div>
192 | 
193 |     <div class="wheel-container">
194 |         <div class="pointer"></div>
195 |         <div class="wheel" id="wheel">
196 |             205 |             <div class="label l1"><span>3å…ƒ</span></div>
206 |             <div class="label l2"><span>æœªä¸­å¥–</span></div>
207 |             <div class="label l3"><span>0.3å…ƒ</span></div>
208 |             <div class="label l4"><span>å†æ¥ä¸€æ¬¡</span></div>
209 |             <div class="label l5"><span>0.1å…ƒ</span></div>
210 |             <div class="label l6"><span>å†æ¥ä¸€æ¬¡</span></div>
211 |         </div>
212 |         <div class="center-circle" id="spinBtn" onclick="spin()">
213 |             å¼€å§‹
214 |         </div>
215 |     </div>
216 | 
217 |     218 |     <div class="modal-overlay" id="resultModal">
219 |         <div class="modal">
220 |             <h2>ğŸ‰ æ¸¸æˆç»“æŸ</h2>
221 |             <p id="finalText"></p>
222 |             <button class="close-btn" onclick="location.reload()">é‡ç½®æ¸¸æˆ</button>
223 |         </div>
224 |     </div>
225 | 
226 |     <script>
227 |         // é…ç½®æ•°æ®
228 |         const segments = [
229 |             { name: "3å…ƒ", value: 3.0, type: "money" },       // index 0
230 |             { name: "æœªä¸­å¥–", value: 0, type: "none" },        // index 1
231 |             { name: "0.3å…ƒ", value: 0.3, type: "money" },     // index 2
232 |             { name: "å†æ¥ä¸€æ¬¡", value: 0, type: "retry" },     // index 3
233 |             { name: "0.1å…ƒ", value: 0.1, type: "money" },     // index 4
234 |             { name: "å†æ¥ä¸€æ¬¡", value: 0, type: "retry" }      // index 5
235 |         ];
236 | 
237 |         // ä¸¥æ ¼çš„æ‰§è¡Œé¡ºåº (å¯¹åº”ä¸Šé¢çš„ segments ç´¢å¼•)
238 |         // é¡ºåº: 3å…ƒ -> æœªä¸­å¥– -> 0.3å…ƒ -> å†æ¥ä¸€æ¬¡ -> 0.1å…ƒ -> å†æ¥ä¸€æ¬¡
239 |         const fixedSequence = [0, 1, 2, 3, 4, 5];
240 | 
241 |         let currentSpinCount = 5;
242 |         let currentMoney = 0;
243 |         let sequenceIndex = 0; // å½“å‰æ‰§è¡Œåˆ°ç¬¬å‡ æ­¥
244 |         let isSpinning = false;
245 |         let currentRotation = 0; // è®°å½•å½“å‰æ—‹è½¬è§’åº¦ï¼Œé˜²æ­¢åè½¬
246 | 
247 |         // DOM å…ƒç´ 
248 |         const wheel = document.getElementById('wheel');
249 |         const spinBtn = document.getElementById('spinBtn');
250 |         const countDisplay = document.getElementById('count');
251 |         const moneyDisplay = document.getElementById('money');
252 |         const modal = document.getElementById('resultModal');
253 |         const finalText = document.getElementById('finalText');
254 | 
255 |         function spin() {
256 |             if (isSpinning) return;
257 |             if (currentSpinCount <= 0) {
258 |                 alert("æ¬¡æ•°å·²ç”¨å®Œï¼");
259 |                 return;
260 |             }
261 |             
262 |             // å¦‚æœåºåˆ—èµ°å®Œäº†ï¼Œå³ä½¿æ¬¡æ•°æ˜¾ç¤ºè¿˜æœ‰ï¼Œä¹Ÿç»“æŸï¼ˆé˜²æ­¢é€»è¾‘æº¢å‡ºï¼‰
263 |             if (sequenceIndex >= fixedSequence.length) {
264 |                 showResult();
265 |                 return;
266 |             }
267 | 
268 |             isSpinning = true;
269 |             spinBtn.classList.add('btn-disabled');
270 |             spinBtn.innerText = "æŠ½å¥–ä¸­";
271 | 
272 |             // 1. æ‰£é™¤æ¬¡æ•° (è§†è§‰ä¸Š)
273 |             currentSpinCount--;
274 |             countDisplay.innerText = currentSpinCount;
275 | 
276 |             // 2. è·å–æœ¬è½®æ—¢å®šç»“æœ
277 |             const targetIndex = fixedSequence[sequenceIndex];
278 |             const targetSegment = segments[targetIndex];
279 | 
280 |             // 3. è®¡ç®—æ—‹è½¬è§’åº¦
281 |             // æ¯ä¸ªæ‰‡åŒº60åº¦ã€‚
282 |             // è¿™é‡Œçš„é€»è¾‘æ˜¯ï¼šæŒ‡é’ˆåœ¨ä¸Šæ–¹(0åº¦/360åº¦)ã€‚
283 |             // å¦‚æœç›®æ ‡æ˜¯ Index 0 (0-60åº¦)ï¼Œè¦è®©å®ƒåœåœ¨ä¸Šæ–¹ï¼Œè½¬ç›˜éœ€è¦æ—‹è½¬ï¼š
284 |             // 360 - (æ‰‡åŒºä¸­å¿ƒè§’åº¦)ã€‚
285 |             // Index 0 ä¸­å¿ƒæ˜¯ 30åº¦ -> è½¬ 330åº¦ã€‚
286 |             // Index 1 ä¸­å¿ƒæ˜¯ 90åº¦ -> è½¬ 270åº¦ã€‚
287 |             
288 |             const segmentAngle = 60;
289 |             const targetCenterAngle = (targetIndex * segmentAngle) + (segmentAngle / 2); 
290 |             
291 |             // åŸºç¡€æ—‹è½¬åœˆæ•° (è‡³å°‘è½¬5åœˆï¼Œ1800åº¦)
292 |             const baseSpins = 360 * 5; 
293 |             
294 |             // è®¡ç®—æœ€ç»ˆè§’åº¦ï¼šæˆ‘ä»¬è¦åˆ°è¾¾çš„è§’åº¦æ˜¯ (360 - targetCenterAngle)
295 |             // ä¸ºäº†ä¿æŒè¿ç»­é¡ºæ—¶é’ˆï¼Œæˆ‘ä»¬éœ€è¦åŸºäºå½“å‰çš„ currentRotation ç´¯åŠ 
296 |             // è®¡ç®— currentRotation å½“å‰åœ¨ 360 ä¸­çš„ä½™æ•°ä½ç½®
297 |             const currentMod = currentRotation % 360;
298 |             
299 |             // ç›®æ ‡ç›¸å¯¹ä½ç½®
300 |             const targetStop = 360 - targetCenterAngle;
301 |             
302 |             // è®¡ç®—å·®å€¼
303 |             let adjust = targetStop - currentMod;
304 |             if (adjust < 0) adjust += 360; // ä¿è¯æ­£å‘æ—‹è½¬
305 | 
306 |             const finalRotate = currentRotation + baseSpins + adjust;
307 | 
308 |             // 4. æ‰§è¡ŒåŠ¨ç”»
309 |             wheel.style.transform = `rotate(${finalRotate}deg)`;
310 |             currentRotation = finalRotate; // æ›´æ–°çŠ¶æ€
311 | 
312 |             // 5. åŠ¨ç”»ç»“æŸåå¤„ç†é€»è¾‘ (4ç§’å)
313 |             setTimeout(() => {
314 |                 handleResult(targetSegment);
315 |             }, 4000);
316 |         }
317 | 
318 |         function handleResult(segment) {
319 |             isSpinning = false;
320 |             spinBtn.classList.remove('btn-disabled');
321 |             spinBtn.innerText = "å¼€å§‹";
322 | 
323 |             // é€»è¾‘å¤„ç†
324 |             if (segment.type === 'money') {
325 |                 currentMoney += segment.value;
326 |                 // è§£å†³æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ (0.1 + 0.2 = 0.3000004)
327 |                 currentMoney = Math.round(currentMoney * 100) / 100;
328 |             } else if (segment.type === 'retry') {
329 |                 currentSpinCount++;
330 |                 countDisplay.innerText = currentSpinCount;
331 |                 // å¯ä»¥åœ¨è¿™é‡ŒåŠ ä¸ªå°æç¤º "è·å¾—é¢å¤–ä¸€æ¬¡æœºä¼š!"
332 |             }
333 | 
334 |             // æ›´æ–° UI
335 |             moneyDisplay.innerText = currentMoney;
336 | 
337 |             // ç§»åŠ¨åˆ°åºåˆ—ä¸‹ä¸€æ­¥
338 |             sequenceIndex++;
339 | 
340 |             // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰æ—¢å®šå‰§æœ¬éƒ½èµ°å®Œäº†
341 |             // æ³¨æ„ï¼šè™½ç„¶æœ€åä¸€æ¬¡æ˜¯â€œå†æ¥ä¸€æ¬¡â€ï¼Œå¯¼è‡´ currentSpinCount = 1
342 |             // ä½†æ ¹æ®ä½ çš„è¦æ±‚â€œåªèµ°ä¸€è½®â€ï¼Œä¸”åºåˆ—å·²ç»ç”¨å…‰ï¼Œæ¸¸æˆåº”ç»“æŸã€‚
343 |             if (sequenceIndex >= fixedSequence.length) {
344 |                 setTimeout(showResult, 500);
345 |             } else if (currentSpinCount === 0) {
346 |                 // åŒé‡ä¿é™©ï¼šå¦‚æœåºåˆ—æ²¡èµ°å®Œä½†æ¬¡æ•°æ²¡äº†ï¼ˆç†è®ºä¸Šä½ çš„å‰§æœ¬ä¸ä¼šè§¦å‘è¿™ä¸ªï¼‰
347 |                 setTimeout(showResult, 500);
348 |             }
349 |         }
350 | 
351 |         function showResult() {
352 |             finalText.innerHTML = `æ­å–œï¼<br>æ€»å…±è·å¾—é‡‘é¢ï¼š<b style="font-size:24px; color:#FF5252">${currentMoney}å…ƒ</b>`;
353 |             modal.style.display = 'flex';
354 |             spinBtn.classList.add('btn-disabled');
355 |             spinBtn.onclick = null; // ç¦ç”¨ç‚¹å‡»
356 |         }
357 |     </script>
358 | </body>
359 | </html>
